"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var _knot=require("knot.js"),_knot2=_interopRequireDefault(_knot);exports["default"]=function(){function e(){return window.scrollY||window.pageYOffset}function t(){d=e(),r()}function r(){l||(window.requestAnimationFrame(function(){return u()}),l=!0)}function n(e){return e.getBoundingClientRect().top+d}function i(e){var t=d,r=t+h,i=n(e),o=i+e.offsetHeight,s=m.threshold/100*h;return o>=t-s&&i<=r+s}function o(e){if(g.emit("src:before",e),w&&e.hasAttribute(m.srcset))e.setAttribute("srcset",e.getAttribute(m.srcset));else{var t=v>1&&e.getAttribute(m.retina);e.setAttribute("src",t||e.getAttribute(m.normal))}g.emit("src:after",e),[m.normal,m.retina,m.srcset].forEach(function(t){return e.removeAttribute(t)}),c()}function s(e){var r=e?"addEventListener":"removeEventListener";return["scroll","resize"].forEach(function(e){return window[r](e,t)}),this}function u(){return h=window.innerHeight,f.forEach(function(e){return i(e)&&o(e)}),l=!1,this}function c(){return f=Array.prototype.slice.call(document.querySelectorAll("["+m.normal+"]")),this}var a=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},d=e(),l=void 0,f=void 0,h=void 0,m={normal:a.normal||"data-normal",retina:a.retina||"data-retina",srcset:a.srcset||"data-srcset",threshold:a.threshold||0},w=document.body.classList.contains("srcset")||"srcset"in document.createElement("img"),v=window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI,g=(0,_knot2["default"])({handlers:s,check:u,update:c});return g};